<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Irish Grid References in R • igr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Irish Grid References in R">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">igr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/igr.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news">
<li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://digitalnature.ie/2025/09/igr-1-0-1-update-of-r-package-supporting-irish-grid-references/">igr 1.0.1</a></li>
    <li><a class="external-link dropdown-item" href="https://digitalnature.ie/2025/01/igr-1-0-0-new-release-of-r-package-supporting-irish-grid-references/">igr 1.0.0</a></li>
    <li><a class="external-link dropdown-item" href="https://digitalnature.ie/2024/08/igr-0-2-0-including-tetrad-irish-grid-reference-support/">igr 0.2.0</a></li>
    <li><a class="external-link dropdown-item" href="https://digitalnature.ie/2024/07/igr-an-r-package-supporting-irish-grid-references/">igr 0.1.1</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/digitalnature-ie/igr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Irish Grid References in R</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/digitalnature-ie/igr/blob/main/vignettes/igr.Rmd" class="external-link"><code>vignettes/igr.Rmd</code></a></small>
      <div class="d-none name"><code>igr.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The Irish Grid (<a href="https://epsg.io/29903" class="external-link">EPSG:29903</a>) is a
coordinate reference system spanning the island of Ireland. Created by
the Ordnance Survey Ireland (now <a href="https://tailte.ie" class="external-link">Tailte
Éireann</a>) and <a href="https://www.nidirect.gov.uk/campaigns/ordnance-survey-of-northern-ireland" class="external-link">Ordnance
Survey of Northern Ireland</a>, locations within the Irish Grid are
defined by an X and Y coordinate.</p>
<p>Irish grid references are an alternative way of referring to
locations on the Irish Grid. An Irish grid reference consists of a
letter, optionally followed by an easting, northing and possibly a final
letter. The first letter (e.g. “N”) refers to a particular 100 km square
on the Irish Grid. There are 25 such 100 km squares - the letter “I” is
skipped. The easting and northing refer to a square within the 100 km
square. An Irish grid reference with a 1-digit easting and northing
(e.g. “N16”) refers to a particular 10 km square wtihin the 100 km
square “N”. A 5-digit easting and northing (e.g. “N 12345 67890”) refers
to a particular 1 m square. The tetrad form of Irish grid reference
consists of a 10 km square reference followed by a letter (e.g. “N16K”).
This refers to a particular 2 km square. There are 25 tetrads in a 10 km
square - the letter “O” is not used.</p>
<p>There are many R packages facilitating <a href="https://cran.r-project.org/view=Spatial" class="external-link">spatial data analysis and
visualisation</a>. The igr package is designed to simplify using
datasets containing Irish grid references in R. It translates Irish grid
references to and from Irish Grid coordinates (X and Y), or to and from
<a href="https://r-spatial.github.io/sf/" class="external-link">sf</a> (simple feature)
objects that other R packages can work with. The igr package supports
precisions of Irish grid reference from 100 km to 1 m including tetrads,
mixes of precision, and Irish grid references with or without whitespace
between the letters, eastings and northings.</p>
<p>When converting Irish grid references to point locations (using
<code><a href="../reference/igr_to_ig.html">igr_to_ig()</a></code>, or <code><a href="../reference/st_igr_as_sf.html">st_igr_as_sf()</a></code> with the
default <code>polygons=FALSE</code>), the south west corners of the
relevant Irish Grid squares are returned by default. The centroids of
the Irish Grid squares can be returned by using
<code>centroids=TRUE</code>. When converting to polygons (using
<code><a href="../reference/st_igr_as_sf.html">st_igr_as_sf()</a></code> with <code>polygons=TRUE</code>), the size
of each polygon is precision-aware.</p>
<p>The functions <code><a href="../reference/st_igr_as_sf.html">st_igr_as_sf()</a></code> and
<code><a href="../reference/st_irishgridrefs.html">st_irishgridrefs()</a></code> convert to and from sf objects in any
coordinate reference system.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>To install the production version of igr from CRAN:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"igr"</span><span class="op">)</span></span></code></pre></div>
<p>To install the development version of igr from GitHub:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install remotes package if needed</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Install development version of igr package from GitHub</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"digitalnature-ie/igr"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="loading-the-package">Loading the package<a class="anchor" aria-label="anchor" href="#loading-the-package"></a>
</h2>
<p>The igr package is loaded in the normal way:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/digitalnature-ie/igr" class="external-link">igr</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="checking-irish-grid-references">Checking Irish grid references<a class="anchor" aria-label="anchor" href="#checking-irish-grid-references"></a>
</h2>
<p>The validity of Irish grid references can be checked with the
function <code><a href="../reference/igr_is_valid.html">igr_is_valid()</a></code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Sample of valid and invalid Irish grid references</span></span>
<span><span class="va">igrs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"A16"</span>, <span class="st">"A123678"</span>, <span class="st">"BAD"</span>, <span class="st">"I12"</span>, <span class="st">""</span>, <span class="st">"B125"</span>, <span class="st">"Z"</span>, <span class="st">"N12D"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/igr_is_valid.html">igr_is_valid</a></span><span class="op">(</span><span class="va">igrs</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1]  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE  TRUE  TRUE</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="converting-from-irish-grid-references">Converting from Irish grid references<a class="anchor" aria-label="anchor" href="#converting-from-irish-grid-references"></a>
</h2>
<p>To convert a vector of Irish grid references to Irish Grid
coordinates use <code><a href="../reference/igr_to_ig.html">igr_to_ig()</a></code>. By default the south west
corners of the Irish grid references are returned.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">igrs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"D12"</span>, <span class="st">"J53"</span>, <span class="st">"M5090"</span>, <span class="st">"N876274"</span>, <span class="st">"S1234550000"</span>, <span class="st">"R10H"</span>, <span class="st">"X"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/igr_to_ig.html">igr_to_ig</a></span><span class="op">(</span><span class="va">igrs</span><span class="op">)</span></span>
<span><span class="co">#&gt; $x</span></span>
<span><span class="co">#&gt; [1]      0 310000 350000 150000 287600 212345 112000 200000</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $y</span></span>
<span><span class="co">#&gt; [1] 400000 420000 330000 290000 227400 150000 104000      0</span></span></code></pre></div>
<p>Alternatively, the centroids of the Irish grid references can be
returned:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/igr_to_ig.html">igr_to_ig</a></span><span class="op">(</span><span class="va">igrs</span>, centroids <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; $x</span></span>
<span><span class="co">#&gt; [1]  50000.0 315000.0 355000.0 150500.0 287650.0 212345.5 113000.0 250000.0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $y</span></span>
<span><span class="co">#&gt; [1] 450000.0 425000.0 335000.0 290500.0 227450.0 150000.5 105000.0  50000.0</span></span></code></pre></div>
<p>The Irish grid references may have spaces between the grid reference
components:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ws_igrs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"D 12"</span>, <span class="st">"J 5 3"</span>, <span class="st">"M 50 90"</span>, <span class="st">"N 876 274"</span>, <span class="st">"S 12345 50000"</span>, <span class="st">"R10 H"</span>, <span class="st">"X"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/igr_to_ig.html">igr_to_ig</a></span><span class="op">(</span><span class="va">ws_igrs</span><span class="op">)</span></span>
<span><span class="co">#&gt; $x</span></span>
<span><span class="co">#&gt; [1]      0 310000 350000 150000 287600 212345 112000 200000</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $y</span></span>
<span><span class="co">#&gt; [1] 400000 420000 330000 290000 227400 150000 104000      0</span></span></code></pre></div>
<p>These sample Irish grid references have a mix of precisions. The
precisions in metres can be returned by supplying a column name for the
precision data:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/igr_to_ig.html">igr_to_ig</a></span><span class="op">(</span><span class="va">igrs</span>, precision <span class="op">=</span> <span class="st">"prec"</span><span class="op">)</span></span>
<span><span class="co">#&gt; $x</span></span>
<span><span class="co">#&gt; [1]      0 310000 350000 150000 287600 212345 112000 200000</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $y</span></span>
<span><span class="co">#&gt; [1] 400000 420000 330000 290000 227400 150000 104000      0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $prec</span></span>
<span><span class="co">#&gt; [1] 1e+05 1e+04 1e+04 1e+03 1e+02 1e+00 2e+03 1e+05</span></span></code></pre></div>
<p>A list or data.frame of Irish grid references can be converted to an
sf object using <code><a href="../reference/st_igr_as_sf.html">st_igr_as_sf()</a></code>. By default the geometries
returned are points located at the south west corner of each grid
reference, and the coordinate reference system is Irish Grid (<a href="https://epsg.io/29903" class="external-link">EPSG:29903</a>):</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">igr_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>igr <span class="op">=</span> <span class="va">igrs</span><span class="op">)</span></span>
<span></span>
<span><span class="va">points_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/st_igr_as_sf.html">st_igr_as_sf</a></span><span class="op">(</span><span class="va">igr_df</span>, <span class="st">"igr"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">points_sf</span></span>
<span><span class="co">#&gt; Simple feature collection with 8 features and 1 field</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 0 ymin: 0 xmax: 350000 ymax: 420000</span></span>
<span><span class="co">#&gt; Projected CRS: TM75 / Irish Grid</span></span>
<span><span class="co">#&gt;           igr              geometry</span></span>
<span><span class="co">#&gt; 1           A       POINT (0 4e+05)</span></span>
<span><span class="co">#&gt; 2         D12 POINT (310000 420000)</span></span>
<span><span class="co">#&gt; 3         J53 POINT (350000 330000)</span></span>
<span><span class="co">#&gt; 4       M5090 POINT (150000 290000)</span></span>
<span><span class="co">#&gt; 5     N876274 POINT (287600 227400)</span></span>
<span><span class="co">#&gt; 6 S1234550000 POINT (212345 150000)</span></span>
<span><span class="co">#&gt; 7        R10H POINT (112000 104000)</span></span>
<span><span class="co">#&gt; 8           X       POINT (2e+05 0)</span></span></code></pre></div>
<p>Irish grid references can be converted to coordinates in any
coordinate reference system, e.g. Longitude and Latitude (WGS 84).</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">points_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/st_igr_as_sf.html">st_igr_as_sf</a></span><span class="op">(</span><span class="va">igr_df</span>, <span class="st">"igr"</span>, crs <span class="op">=</span> <span class="fl">4326</span><span class="op">)</span></span>
<span></span>
<span><span class="va">points_sf</span></span>
<span><span class="co">#&gt; Simple feature collection with 8 features and 1 field</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -11.1116 ymin: 51.25359 xmax: -5.702335 ymax: 55.01528</span></span>
<span><span class="co">#&gt; Geodetic CRS:  WGS 84</span></span>
<span><span class="co">#&gt;           igr                   geometry</span></span>
<span><span class="co">#&gt; 1           A  POINT (-11.1116 54.80789)</span></span>
<span><span class="co">#&gt; 2         D12 POINT (-6.281164 55.01528)</span></span>
<span><span class="co">#&gt; 3         J53 POINT (-5.702335 54.19703)</span></span>
<span><span class="co">#&gt; 4       M5090   POINT (-8.7606 53.85718)</span></span>
<span><span class="co">#&gt; 5     N876274 POINT (-6.687144 53.28992)</span></span>
<span><span class="co">#&gt; 6 S1234550000 POINT (-7.818534 52.60153)</span></span>
<span><span class="co">#&gt; 7        R10H POINT (-9.287254 52.18127)</span></span>
<span><span class="co">#&gt; 8           X POINT (-8.000721 51.25359)</span></span></code></pre></div>
<p>These points can be plotted by the <a href="https://r-tmap.github.io/tmap/" class="external-link">tmap</a> package. A basic outline
of Ireland and the United Kingdom can be retrieved from the <a href="https://cran.r-project.org/package=maps" class="external-link">maps</a> package.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"maps"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">&amp;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"tmap"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">&amp;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"units"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/adeckmyn/maps" class="external-link">maps</a></span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-tmap/tmap" class="external-link">tmap</a></span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-quantities.github.io/units/" class="external-link">units</a></span><span class="op">)</span></span>
<span></span>
<span>  <span class="va">ie_uk_sf</span> <span class="op">&lt;-</span> <span class="fu">maps</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/maps/man/map.html" class="external-link">map</a></span><span class="op">(</span><span class="st">"world"</span>,</span>
<span>    regions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Ireland"</span>, <span class="st">"UK"</span><span class="op">)</span>,</span>
<span>    plot <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    fill <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="va">ie_uk</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span><span class="fl">29903</span><span class="op">)</span></span>
<span></span>
<span>  <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_shape.html" class="external-link">tm_shape</a></span><span class="op">(</span><span class="va">points_sf</span>, ext <span class="op">=</span> <span class="fl">1.4</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_symbols.html" class="external-link">tm_dots</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">1</span>, fill <span class="op">=</span> <span class="st">"cornflowerblue"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_text.html" class="external-link">tm_text</a></span><span class="op">(</span><span class="st">"igr"</span>, ymod <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_shape.html" class="external-link">tm_shape</a></span><span class="op">(</span><span class="va">ie_uk_sf</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_polygons.html" class="external-link">tm_borders</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><img src="igr_files/figure-html/example-igr-poi-plot-1.png" alt="A map of Ireland with a dot at the south west corner of each sample grid reference." width="700"></p>
<p>The Irish grid references can also be converted to polygon
geometries. Each polygon spans the full extent of a grid reference, so a
set of grid references of varying precision will result in a set of
polygons with different sizes.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">polygons_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/st_igr_as_sf.html">st_igr_as_sf</a></span><span class="op">(</span><span class="va">igr_df</span>, <span class="st">"igr"</span>, polygons <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">polygons_sf</span></span>
<span><span class="co">#&gt; Simple feature collection with 8 features and 1 field</span></span>
<span><span class="co">#&gt; Geometry type: POLYGON</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 0 ymin: 0 xmax: 360000 ymax: 5e+05</span></span>
<span><span class="co">#&gt; Projected CRS: TM75 / Irish Grid</span></span>
<span><span class="co">#&gt;           igr                       geometry</span></span>
<span><span class="co">#&gt; 1           A POLYGON ((1e+05 5e+05, 1e+0...</span></span>
<span><span class="co">#&gt; 2         D12 POLYGON ((320000 430000, 32...</span></span>
<span><span class="co">#&gt; 3         J53 POLYGON ((360000 340000, 36...</span></span>
<span><span class="co">#&gt; 4       M5090 POLYGON ((151000 291000, 15...</span></span>
<span><span class="co">#&gt; 5     N876274 POLYGON ((287700 227500, 28...</span></span>
<span><span class="co">#&gt; 6 S1234550000 POLYGON ((212346 150001, 21...</span></span>
<span><span class="co">#&gt; 7        R10H POLYGON ((114000 106000, 11...</span></span>
<span><span class="co">#&gt; 8           X POLYGON ((3e+05 1e+05, 3e+0...</span></span></code></pre></div>
<p>Plotting these polygons:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/exists.html" class="external-link">exists</a></span><span class="op">(</span><span class="st">"ie_uk_sf"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># identify small polygons requiring highlighting</span></span>
<span>  <span class="va">polygons_sf</span><span class="op">$</span><span class="va">area</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_measures.html" class="external-link">st_area</a></span><span class="op">(</span><span class="va">polygons_sf</span><span class="op">)</span></span>
<span>  <span class="va">small_polygons_sf</span> <span class="op">&lt;-</span> <span class="va">polygons_sf</span><span class="op">[</span><span class="va">polygons_sf</span><span class="op">$</span><span class="va">area</span> <span class="op">&lt;=</span> <span class="fu">units</span><span class="fu">::</span><span class="fu"><a href="https://r-quantities.github.io/units/reference/units.html" class="external-link">set_units</a></span><span class="op">(</span><span class="fl">5000000</span>, <span class="va">m</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span>, <span class="op">]</span></span>
<span></span>
<span>  <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_shape.html" class="external-link">tm_shape</a></span><span class="op">(</span><span class="va">ie_uk_sf</span>, bbox <span class="op">=</span> <span class="va">points_sf</span>, ext <span class="op">=</span> <span class="fl">1.4</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_polygons.html" class="external-link">tm_borders</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_shape.html" class="external-link">tm_shape</a></span><span class="op">(</span><span class="va">polygons_sf</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_polygons.html" class="external-link">tm_polygons</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"cornflowerblue"</span>, fill_alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_text.html" class="external-link">tm_text</a></span><span class="op">(</span><span class="st">"igr"</span>, ymod <span class="op">=</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_shape.html" class="external-link">tm_shape</a></span><span class="op">(</span><span class="va">small_polygons_sf</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_symbols.html" class="external-link">tm_bubbles</a></span><span class="op">(</span></span>
<span>      fill_alpha <span class="op">=</span> <span class="fl">0</span>, col <span class="op">=</span> <span class="st">"orangered"</span>, lwd <span class="op">=</span> <span class="fl">2</span>,</span>
<span>      size <span class="op">=</span> <span class="fl">0.8</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><img src="igr_files/figure-html/example-igr-pol-plot-1.png" alt="A map of Ireland with polygons spanning each sample grid reference. The polygons range in size from 100 km square to 1 m square." width="700"></p>
</div>
<div class="section level2">
<h2 id="ignoring-invalid-irish-grid-references">Ignoring invalid Irish grid references<a class="anchor" aria-label="anchor" href="#ignoring-invalid-irish-grid-references"></a>
</h2>
<p>To be consistent with the behaviour of <code><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">sf::st_as_sf()</a></code>,
an error is returned if any of the Irish grid references supplied to
<code><a href="../reference/st_igr_as_sf.html">st_igr_as_sf()</a></code> are invalid. To avoid this scenario, any
invalid Irish grid references can be filtered out using
<code><a href="../reference/igr_is_valid.html">igr_is_valid()</a></code>:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">some_invalid_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>igr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">igrs</span>, <span class="st">"BAD"</span>, <span class="st">"I"</span>, <span class="st">""</span>, <span class="st">"123"</span>, <span class="st">"N1"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">some_invalid_df</span></span>
<span><span class="co">#&gt;            igr</span></span>
<span><span class="co">#&gt; 1            A</span></span>
<span><span class="co">#&gt; 2          D12</span></span>
<span><span class="co">#&gt; 3          J53</span></span>
<span><span class="co">#&gt; 4        M5090</span></span>
<span><span class="co">#&gt; 5      N876274</span></span>
<span><span class="co">#&gt; 6  S1234550000</span></span>
<span><span class="co">#&gt; 7         R10H</span></span>
<span><span class="co">#&gt; 8            X</span></span>
<span><span class="co">#&gt; 9          BAD</span></span>
<span><span class="co">#&gt; 10           I</span></span>
<span><span class="co">#&gt; 11            </span></span>
<span><span class="co">#&gt; 12         123</span></span>
<span><span class="co">#&gt; 13          N1</span></span>
<span><span class="va">valid_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/st_igr_as_sf.html">st_igr_as_sf</a></span><span class="op">(</span><span class="va">some_invalid_df</span><span class="op">[</span><span class="fu"><a href="../reference/igr_is_valid.html">igr_is_valid</a></span><span class="op">(</span><span class="va">some_invalid_df</span><span class="op">$</span><span class="va">igr</span><span class="op">)</span>, , drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="va">valid_sf</span></span>
<span><span class="co">#&gt; Simple feature collection with 8 features and 1 field</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 0 ymin: 0 xmax: 350000 ymax: 420000</span></span>
<span><span class="co">#&gt; Projected CRS: TM75 / Irish Grid</span></span>
<span><span class="co">#&gt;           igr              geometry</span></span>
<span><span class="co">#&gt; 1           A       POINT (0 4e+05)</span></span>
<span><span class="co">#&gt; 2         D12 POINT (310000 420000)</span></span>
<span><span class="co">#&gt; 3         J53 POINT (350000 330000)</span></span>
<span><span class="co">#&gt; 4       M5090 POINT (150000 290000)</span></span>
<span><span class="co">#&gt; 5     N876274 POINT (287600 227400)</span></span>
<span><span class="co">#&gt; 6 S1234550000 POINT (212345 150000)</span></span>
<span><span class="co">#&gt; 7        R10H POINT (112000 104000)</span></span>
<span><span class="co">#&gt; 8           X       POINT (2e+05 0)</span></span></code></pre></div>
<p>In tidy r this can be written as:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">valid_sf</span> <span class="op">&lt;-</span> <span class="va">some_invalid_df</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">filter</span><span class="op">(</span><span class="fu"><a href="../reference/igr_is_valid.html">igr_is_valid</a></span><span class="op">(</span><span class="va">igr</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/st_igr_as_sf.html">st_igr_as_sf</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="converting-to-irish-grid-references">Converting to Irish grid references<a class="anchor" aria-label="anchor" href="#converting-to-irish-grid-references"></a>
</h2>
<p>Irish Grid coordinates can be converted to Irish grid references
using <code><a href="../reference/ig_to_igr.html">ig_to_igr()</a></code>. The first two columns in the matrix
supplied must be the Irish Grid X coordinate and Y coordinate
respectively. Any other columns are ignored.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">490000</span>, <span class="fl">400000</span>, <span class="fl">0</span>, <span class="fl">453000</span>, <span class="fl">4000</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">2</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p</span></span>
<span><span class="co">#&gt;           x      y</span></span>
<span><span class="co">#&gt; [1,]      0 490000</span></span>
<span><span class="co">#&gt; [2,] 400000      0</span></span>
<span><span class="co">#&gt; [3,] 453000   4000</span></span>
<span><span class="fu"><a href="../reference/ig_to_igr.html">ig_to_igr</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "A000900" "Z000000" "Z530040"</span></span></code></pre></div>
<p>Spaces or other strings can be inserted between the letter, easting
and northing:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ig_to_igr.html">ig_to_igr</a></span><span class="op">(</span><span class="va">p</span>, sep <span class="op">=</span> <span class="st">" "</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "A 000 900" "Z 000 000" "Z 530 040"</span></span></code></pre></div>
<p>The generated Irish grid references can be limited to a particular
precision by specifying the number of digits for both easting and
northing. Between 0 (for 100 km precision) and 5 (for 1 m precision)
digits are supported.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ig_to_igr.html">ig_to_igr</a></span><span class="op">(</span><span class="va">p</span>, digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="co"># 10 km precision</span></span>
<span><span class="co">#&gt; [1] "A09" "Z00" "Z50"</span></span>
<span></span>
<span><span class="fu"><a href="../reference/ig_to_igr.html">ig_to_igr</a></span><span class="op">(</span><span class="va">p</span>, digits <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="co"># 1 m precision</span></span>
<span><span class="co">#&gt; [1] "A0000090000" "Z0000000000" "Z5300004000"</span></span></code></pre></div>
<p>Precision can also be specified in terms of metres. Supported values
are 1, 10, 100, 1000 (1 km), 2000 (tetrad), 10000, and 100000 (100 km).
Any value supplied for <code>precision</code> overrides any value
supplied for <code>digits</code>.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ig_to_igr.html">ig_to_igr</a></span><span class="op">(</span><span class="va">p</span>, precision <span class="op">=</span> <span class="fl">10000</span><span class="op">)</span> <span class="co"># 10 km precision</span></span>
<span><span class="co">#&gt; [1] "A09" "Z00" "Z50"</span></span>
<span></span>
<span><span class="fu"><a href="../reference/ig_to_igr.html">ig_to_igr</a></span><span class="op">(</span><span class="va">p</span>, precision <span class="op">=</span> <span class="fl">2000</span><span class="op">)</span> <span class="co"># 2 km precision - tetrad form</span></span>
<span><span class="co">#&gt; [1] "A09A" "Z00A" "Z50H"</span></span>
<span></span>
<span><span class="fu"><a href="../reference/ig_to_igr.html">ig_to_igr</a></span><span class="op">(</span><span class="va">p</span>, precision <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="co"># 1 m precision</span></span>
<span><span class="co">#&gt; [1] "A0000090000" "Z0000000000" "Z5300004000"</span></span></code></pre></div>
<p>A data.frame of Irish Grid coordinates can be converted:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p_df</span></span>
<span><span class="co">#&gt;        x      y</span></span>
<span><span class="co">#&gt; 1      0 490000</span></span>
<span><span class="co">#&gt; 2 400000      0</span></span>
<span><span class="co">#&gt; 3 453000   4000</span></span>
<span><span class="fu"><a href="../reference/ig_to_igr.html">ig_to_igr</a></span><span class="op">(</span><span class="va">p_df</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "A000900" "Z000000" "Z530040"</span></span></code></pre></div>
<p>An sf object containing geometries of type POINT can be converted to
Irish grid references using <code><a href="../reference/st_irishgridrefs.html">st_irishgridrefs()</a></code>:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p_sf</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="va">p_df</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">29903</span>,</span>
<span>  coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">p_sf</span></span>
<span><span class="co">#&gt; Simple feature collection with 3 features and 0 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 0 ymin: 0 xmax: 453000 ymax: 490000</span></span>
<span><span class="co">#&gt; Projected CRS: TM75 / Irish Grid</span></span>
<span><span class="co">#&gt;              geometry</span></span>
<span><span class="co">#&gt; 1    POINT (0 490000)</span></span>
<span><span class="co">#&gt; 2     POINT (4e+05 0)</span></span>
<span><span class="co">#&gt; 3 POINT (453000 4000)</span></span>
<span><span class="fu"><a href="../reference/st_irishgridrefs.html">st_irishgridrefs</a></span><span class="op">(</span><span class="va">p_sf</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "A000900" "Z000000" "Z530040"</span></span></code></pre></div>
<p>To append Irish grid references (with spaces) to the original sf
object using base r:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p_sf</span><span class="op">$</span><span class="va">igr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/st_irishgridrefs.html">st_irishgridrefs</a></span><span class="op">(</span><span class="va">p_sf</span>, sep <span class="op">=</span> <span class="st">" "</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p_sf</span></span>
<span><span class="co">#&gt; Simple feature collection with 3 features and 1 field</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 0 ymin: 0 xmax: 453000 ymax: 490000</span></span>
<span><span class="co">#&gt; Projected CRS: TM75 / Irish Grid</span></span>
<span><span class="co">#&gt;              geometry       igr</span></span>
<span><span class="co">#&gt; 1    POINT (0 490000) A 000 900</span></span>
<span><span class="co">#&gt; 2     POINT (4e+05 0) Z 000 000</span></span>
<span><span class="co">#&gt; 3 POINT (453000 4000) Z 530 040</span></span></code></pre></div>
<p>In tidy r this can be written as:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p_sf</span> <span class="op">&lt;-</span> <span class="va">p_sf</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">mutate</span><span class="op">(</span>igr <span class="op">=</span> <span class="fu"><a href="../reference/st_irishgridrefs.html">st_irishgridrefs</a></span><span class="op">(</span>sep <span class="op">=</span> <span class="st">" "</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by John Kennedy, <a href="https://digitalnature.ie" class="external-link"><img src="https://digitalnature.ie/wp-content/uploads/2024/07/dn_narrow_CO.png" width="80" alt=""></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
