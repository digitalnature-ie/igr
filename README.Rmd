---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# igr

<!-- badges: start -->
[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://lifecycle.r-lib.org/articles/stages.html#experimental)
[![CRAN status](https://www.r-pkg.org/badges/version/igr)](https://CRAN.R-project.org/package=igr)
[![R-CMD-check](https://github.com/digitalnature-ie/igr/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/digitalnature-ie/igr/actions/workflows/R-CMD-check.yaml)
[![test-coverage](https://github.com/digitalnature-ie/igr/actions/workflows/test-coverage.yaml/badge.svg)](https://github.com/digitalnature-ie/igr/actions/workflows/test-coverage.yaml)
[![Codecov test coverage](https://codecov.io/gh/digitalnature-ie/igr/branch/main/graph/badge.svg)](https://app.codecov.io/gh/digitalnature-ie/igr?branch=main)
<!-- badges: end -->

Convert Irish Grid References to Irish Grid coordinates or a simple feature object in any coordinate reference system, and vice versa.

## Installation

You can install the development version of igr like so:

``` r
# FILL THIS IN! HOW CAN PEOPLE INSTALL YOUR DEV PACKAGE?
```

## Converting from Irish Grid References

Convert Irish Grid References to Irish Grid coordinates:

```{r example-igr}
library(igr)

igrs <- c("A", "C12", "J53", "N8090", "S1234550000", "V")

igr_to_ig(igrs)
```

Convert Irish Grid References to sf object of points in the Irish Grid coordinate reference system:

```{r example-igr-p-sf}
p_sf <- st_igr_as_sf(data.frame(igr = igrs), "igr")

p_sf
```

Plot the results:

```{r example-igr-p-sf-plot, message=FALSE}
library(maps)
library(tmap)

ie_uk_sf <- maps::map("world", 
                      regions = c("Ireland", "UK"), 
                      plot = FALSE, 
                      fill = TRUE) |>
  sf::st_as_sf(ie_uk) |>
  sf::st_transform(29903)

tm_shape(p_sf, ext = 1.2) +
  tm_dots(size = 1, col = "cornflowerblue") +
  tm_text("igr", ymod = 1) +
  tm_shape(ie_uk_sf) +
  tm_borders()
```

Convert Irish Grid References to sf object of polygons in the Irish Grid coordinate reference system:

```{r example-igr-s-sf}
s_sf <- st_igr_as_sf(data.frame(igr = igrs), "igr", polygons = TRUE)

s_sf
```

Plot the results:

```{r example-igr-s-sf-plot, message=FALSE}
tm_shape(ie_uk_sf, bbox = s_sf, ext = 1.2) +
  tm_borders() +
  tm_shape(s_sf, ext = 1.2) +
  tm_polygons(size = 1, col = "cornflowerblue", alpha = 0.5) +
  tm_text("igr", ymod = -1)
```

## Converting to Irish Grid References

Starting with a list of Irish Grid coordinates:

```{r example-igc-igr}
p <- list(x = c(0, 490000), y = c(400000, 0))

ig_to_igr(p)
ig_to_igr(p, sep = " ")
ig_to_igr(p, digits = 1)
```

Starting with an sf object:

```{r example-sf-igr}
p_sf <- sf::st_as_sf(data.frame(p),
  crs = 29903,
  coords = c("x", "y")
)

st_irishgridrefs(p_sf)
st_irishgridrefs(p_sf, sep = " ")
st_irishgridrefs(p_sf, digits = 1)
```
